(this["webpackJsonpbudget-app"]=this["webpackJsonpbudget-app"]||[]).push([[10],{79:function(t,e,n){"use strict";var r={};n.r(r),n.d(r,"fetchBudget",(function(){return i})),n.d(r,"fetchBudgetedCategories",(function(){return s})),n.d(r,"addTransaction",(function(){return d})),n.d(r,"deleteTransaction",(function(){return b})),n.d(r,"editTransaction",(function(){return l}));var a={};n.r(a),n.d(a,"fetchAllCategories",(function(){return p}));var c=n(77),o=n.n(c),u=n(78),i=function(){var t=Object(u.a)(o.a.mark((function t(e,n){var r,a,c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.id,t.next=3,fetch("".concat("http://localhost:3001","/budgets/").concat(r,"/?_embed=transactions"));case 3:return a=t.sent,t.next=6,a.json();case 6:return c=t.sent,t.abrupt("return",c);case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),s=function(){var t=Object(u.a)(o.a.mark((function t(e,n){var r,a,c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.id,t.next=3,fetch("".concat("http://localhost:3001","/budgets/").concat(r,"/budgetCategories"));case 3:return a=t.sent,t.next=6,a.json();case 6:return c=t.sent,t.abrupt("return",c);case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),d=function(){var t=Object(u.a)(o.a.mark((function t(e){var n,r,a,c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.budgetId,r=e.data,t.next=3,fetch("".concat("http://localhost:3001","/budgets/").concat(n,"/transactions"),{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(r)});case 3:return a=t.sent,t.next=6,a.json();case 6:return c=t.sent,t.abrupt("return",c);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),b=function(){var t=Object(u.a)(o.a.mark((function t(e){var n,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat("http://localhost:3001","/transactions/").concat(e),{method:"DELETE"});case 2:return n=t.sent,t.next=5,n.json();case 5:return r=t.sent,t.abrupt("return",r);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),l=function(){var t=Object(u.a)(o.a.mark((function t(e){var n,r,a,c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.transactionId,r=e.data,t.next=3,fetch("".concat("http://localhost:3001","/transactions/").concat(n),{method:"PATCH",headers:{"Content-type":"application/json"},body:JSON.stringify(r)});case 3:return a=t.sent,t.next=6,a.json();case 6:return c=t.sent,t.abrupt("return",c);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),p=function(){var t=Object(u.a)(o.a.mark((function t(){var e,n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat("http://localhost:3001","/categories/?_expand=parentCategory"));case 2:return e=t.sent,t.next=5,e.json();case 5:return n=t.sent,t.abrupt("return",n);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),j={budget:r,common:a};e.a=j},88:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return f}));var r=n(23),a=n(1),c=n(0),o=n(30),u=n(51),i=n(5),s=n(40),d=n(15),b=n(83),l=n(82),p=function(t){var e=t.onSubmit,n=void 0===e?l.noop:e,o=t.transactions,s=t.categories,p=t.groupCategoriesBy,j=Object(u.a)().t,h=Object(i.g)().id,f=o.find((function(t){return t.id===h})),O=f.amount,x=f.categoryId,m=f.date,v=f.description,g=function(t){return t?void 0:j("Field is required!")},y=p?Object(l.groupBy)(s,p):null,w=Object(c.useMemo)((function(){return y?Object.entries(y).map((function(t){var e=Object(r.a)(t,2),n=e[0],c=e[1];return Object(a.jsx)("optgroup",{label:j(n),children:c.map((function(t){return Object(a.jsx)("option",{value:t.id,children:j(t.name)},t.id)}))},n)})):s.map((function(t){return Object(a.jsx)("option",{value:t.id,children:j(t.name)})}))}),[s,y,j]);return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("h2",{children:j("Transaction edition")}),Object(a.jsx)(b.b,{onSubmit:n,render:function(t){var e=t.handleSubmit,n=(t.form,t.submitting);t.pristine,t.values;return Object(a.jsxs)("form",{onSubmit:e,children:[Object(a.jsx)(b.a,{name:"description",validate:g,defaultValue:v,children:function(t){var e=t.input,n=t.meta;return Object(a.jsxs)("div",{children:[Object(a.jsx)("label",{children:j("Description")}),Object(a.jsx)("input",Object(d.a)(Object(d.a)({},e),{},{type:"text",placeholder:j("Description")})),n.error&&n.touched&&Object(a.jsx)("span",{role:"alert",children:n.error})]})}}),Object(a.jsx)(b.a,{name:"amount",validate:g,defaultValue:O,parse:function(t){return Number(t)},children:function(t){var e=t.input,n=t.meta;return Object(a.jsxs)("div",{children:[Object(a.jsx)("label",{children:j("Amount")}),Object(a.jsx)("input",Object(d.a)(Object(d.a)({},e),{},{type:"number",step:"0.01",placeholder:j("Amount")})),n.error&&n.touched&&Object(a.jsx)("span",{role:"alert",children:n.error})]})}}),Object(a.jsx)(b.a,{name:"categoryId",validate:g,defaultValue:x,children:function(t){var e=t.input,n=t.meta;return Object(a.jsxs)("div",{children:[Object(a.jsx)("label",{children:j("Category")}),Object(a.jsx)("select",Object(d.a)(Object(d.a)({},e),{},{children:w})),n.error&&n.touched&&Object(a.jsx)("span",{role:"alert",children:n.error})]})}}),Object(a.jsx)(b.a,{name:"date",validate:g,defaultValue:m.slice(0,10),children:function(t){var e=t.input,n=t.meta;return Object(a.jsxs)("div",{children:[Object(a.jsx)("label",{children:j("Date")}),Object(a.jsx)("input",Object(d.a)(Object(d.a)({},e),{},{type:"date",placeholder:j("Date")})),n.error&&n.touched&&Object(a.jsx)("span",{role:"alert",children:n.error})]})}}),Object(a.jsx)("div",{className:"buttons",children:Object(a.jsx)("button",{type:"submit",disabled:n,children:j("Submit")})})]})}})]})},j=n(79),h=n(31),f=function(){var t=Object(i.g)().id,e=Object(o.d)(["budget",{id:1}],j.a.budget.fetchBudget).data,n=Object(o.d)(["allCategories"],j.a.common.fetchAllCategories).data,c=Object(o.c)(j.a.budget.editTransaction,{onSuccess:function(){h.a.invalidateQueries(["budget",{id:1}]),s.a.success(l("Transaction has been updated!"),{position:s.a.POSITION.TOP_RIGHT})},onError:function(){s.a.error(l("Something went wrong."),{position:s.a.POSITION.TOP_RIGHT})}}),d=Object(r.a)(c,1)[0],b=Object(i.f)(),l=Object(u.a)().t;return Object(a.jsx)(p,{onSubmit:function(n){n.id=t,n.budgetId=e.id,d({transactionId:t,data:n}).then((function(){return b.push("/budget")}))},categories:n,transactions:e.transactions,groupCategoriesBy:"parentCategory.name"})}}}]);
//# sourceMappingURL=10.10827744.chunk.js.map