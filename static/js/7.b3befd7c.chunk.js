(this["webpackJsonpbudget-app"]=this["webpackJsonpbudget-app"]||[]).push([[7],{79:function(t,n,e){"use strict";var r={};e.r(r),e.d(r,"fetchBudget",(function(){return i})),e.d(r,"fetchBudgetedCategories",(function(){return s})),e.d(r,"addTransaction",(function(){return f})),e.d(r,"deleteTransaction",(function(){return d})),e.d(r,"editTransaction",(function(){return l}));var c={};e.r(c),e.d(c,"fetchAllCategories",(function(){return b}));var a=e(77),u=e.n(a),o=e(78),i=function(){var t=Object(o.a)(u.a.mark((function t(n,e){var r,c,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.id,t.next=3,fetch("".concat("http://localhost:3001","/budgets/").concat(r,"/?_embed=transactions"));case 3:return c=t.sent,t.next=6,c.json();case 6:return a=t.sent,t.abrupt("return",a);case 8:case"end":return t.stop()}}),t)})));return function(n,e){return t.apply(this,arguments)}}(),s=function(){var t=Object(o.a)(u.a.mark((function t(n,e){var r,c,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.id,t.next=3,fetch("".concat("http://localhost:3001","/budgets/").concat(r,"/budgetCategories"));case 3:return c=t.sent,t.next=6,c.json();case 6:return a=t.sent,t.abrupt("return",a);case 8:case"end":return t.stop()}}),t)})));return function(n,e){return t.apply(this,arguments)}}(),f=function(){var t=Object(o.a)(u.a.mark((function t(n){var e,r,c,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=n.budgetId,r=n.data,t.next=3,fetch("".concat("http://localhost:3001","/budgets/").concat(e,"/transactions"),{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(r)});case 3:return c=t.sent,t.next=6,c.json();case 6:return a=t.sent,t.abrupt("return",a);case 8:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),d=function(){var t=Object(o.a)(u.a.mark((function t(n){var e,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat("http://localhost:3001","/transactions/").concat(n),{method:"DELETE"});case 2:return e=t.sent,t.next=5,e.json();case 5:return r=t.sent,t.abrupt("return",r);case 7:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),l=function(){var t=Object(o.a)(u.a.mark((function t(n){var e,r,c,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=n.transactionId,r=n.data,t.next=3,fetch("".concat("http://localhost:3001","/transactions/").concat(e),{method:"PATCH",headers:{"Content-type":"application/json"},body:JSON.stringify(r)});case 3:return c=t.sent,t.next=6,c.json();case 6:return a=t.sent,t.abrupt("return",a);case 8:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),b=function(){var t=Object(o.a)(u.a.mark((function t(){var n,e;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat("http://localhost:3001","/categories/?_expand=parentCategory"));case 2:return n=t.sent,t.next=5,n.json();case 5:return e=t.sent,t.abrupt("return",e);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),p={budget:r,common:c};n.a=p},80:function(t,n,e){"use strict";e.d(n,"a",(function(){return r})),e.d(n,"b",(function(){return c}));var r=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en",e=Number(t),r=function(){switch(n){case"pl":return"PLN";default:return"USD"}}();return new Intl.NumberFormat(n,{style:"currency",currency:r}).format(e)},c=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en",e=new Date(t);return new Intl.DateTimeFormat(n).format(e)}},86:function(t,n,e){"use strict";e.r(n),e.d(n,"default",(function(){return T}));var r=e(23),c=e(1),a=e(3),u=e(0),o=e(82),i=e(51),s=e(30),f=e(6),d=e(80),l=e(4);function b(){var t=Object(l.a)(["\n    font-weight: 700;\n    color: ","\n"]);return b=function(){return t},t}function p(){var t=Object(l.a)(["\n    background-color: ",";\n"]);return p=function(){return t},t}function j(){var t=Object(l.a)(["\n    background-color: ",";\n"]);return j=function(){return t},t}function h(){var t=Object(l.a)(["\n    display: flex;\n    justify-content: space-between;\n    border: 1px solid ",";\n    padding: ","px;\n"]);return h=function(){return t},t}var g=a.default.div(h(),(function(t){return t.theme.colors.grey.dark}),(function(t){return t.theme.spacing.xs})),m=Object(a.default)(g)(j(),(function(t){return t.theme.colors.grey.normal})),O=Object(a.default)(g)(p(),(function(t){return t.theme.colors.grey.light})),v=a.default.span(b(),(function(t){var n=t.theme;return t.negative?n.colors.red.normal:n.colors.green.normal})),x=function(t){var n=t.name,e=t.onClick,r=t.categories,a=t.transactions,o=t.amount,s=Object(i.a)().i18n.language,f=Object(u.useMemo)((function(){if(o)return null;var t=function(){try{return r.reduce((function(t,n){return t+n.budget}),0)}catch(t){return null}}(),n=a.filter((function(t){return r.find((function(n){return n.categoryId===t.categoryId}))})).reduce((function(t,n){return t+n.amount}),0);return t?t-n:null}),[r,a,o]),l=Object(u.useMemo)((function(){return o||f}),[o,f]);return Object(c.jsxs)(m,{onClick:e,children:[Object(c.jsx)("span",{children:n}),Object(c.jsx)(v,{negative:l<0,children:Object(d.a)(l,s)})]})},y=function(t){var n=t.name,e=t.item,r=t.transactions,a=Object(i.a)().i18n.language,u=r.filter((function(t){return t.categoryId===e.id})).reduce((function(t,n){return t+n.amount}),0),o=e.budget-u;return Object(c.jsxs)(O,{children:[Object(c.jsx)("span",{children:n}),Object(c.jsx)(v,{negative:o<0,children:Object(d.a)(o,a)})]})},C=e(41),w=e(79),k=e(42),I=Object(a.default)("div").withConfig({displayName:"BudgetCategoryList___StyledDiv",componentId:"t7troc-0"})(["border-bottom:5px solid ",";"],(function(t){return t.theme.colors.grey.light})),M=Object(a.default)("div").withConfig({displayName:"BudgetCategoryList___StyledDiv2",componentId:"t7troc-1"})(["border-top:5px solid ",";"],(function(t){return t.theme.colors.grey.light})),T=function(){var t=Object(s.d)(["budget",{id:1}],w.a.budget.fetchBudget).data,n=Object(s.d)(["allCategories"],w.a.common.fetchAllCategories).data,e=Object(s.d)(["budgetedCategories",{id:1}],w.a.budget.fetchBudgetedCategories).data,a=Object(u.useContext)(C.a).dispatch,d=Object(u.useCallback)((function(t){return a({type:k.a,payload:t})}),[a]),l=Object(i.a)().t,b=Object(u.useRef)(null),p=Object(u.useMemo)((function(){return Object(o.groupBy)(e,(function(t){return n.find((function(n){return n.id===t.categoryId})).parentCategory.name}))}),[e,n]),j=Object(u.useCallback)((function(){d(),b.current()}),[d,b]),h=Object(u.useCallback)((function(){d(null),b.current()}),[d,b]),g=Object(u.useMemo)((function(){return Object.entries(p).map((function(e){var a=Object(r.a)(e,2),u=a[0],o=a[1];return{id:u,Trigger:function(n){var e=n.onClick;return Object(c.jsx)(x,{name:u,onClick:function(){e(u),d(u)},categories:o,transactions:t.transactions})},children:o.map((function(e){var r=n.find((function(t){return t.id===e.categoryId})).name;return Object(c.jsx)(y,{name:r,item:e,transactions:t.transactions},e.id)}))}}))}),[n,t.transactions,p,d]),m=Object(u.useMemo)((function(){return t.transactions.reduce((function(t,n){return t+n.amount}),0)}),[t.transactions]),O=Object(u.useMemo)((function(){return t.totalAmount-m}),[t.totalAmount,m]),v=Object(u.useMemo)((function(){return e.reduce((function(n,e){var r=t.transactions.filter((function(t){return t.categoryId===e.id})).reduce((function(t,n){return t+n.amount}),0);return n+Math.max(e.budget,r)}),0)}),[e,t.transactions]),T=Object(u.useMemo)((function(){return t.transactions.filter((function(t){return!e.find((function(n){return n.id===t.categoryId}))}))}),[t.transactions,e]),_=Object(u.useMemo)((function(){return T.reduce((function(t,n){return t+n.amount}),0)}),[T]),A=Object(u.useMemo)((function(){return t.totalAmount-v-_}),[t.totalAmount,v,_]);return Object(c.jsxs)("div",{children:[Object(c.jsx)(I,{children:Object(c.jsx)(x,{name:t.name,amount:O,onClick:j})}),Object(c.jsx)(f.f,{items:g,clickRef:b}),Object(c.jsx)(M,{children:Object(c.jsx)(x,{name:l("Other categories"),amount:A,onClick:h})})]})}}}]);
//# sourceMappingURL=7.b3befd7c.chunk.js.map